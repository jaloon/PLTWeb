var dispatch;var deleteAppdev;$(function(){dispatch=function(e,f){var d="添加APP设备信息";var c="487px";if("edit"==e){d="修改APP设备信息"}if("view"==e){d="查看APP设备信息";c="436px"}layer.open({type:2,title:["APP设备信息管理（"+d+"）","font-size:14px;color:#ffffff;background:#478de4;"],shade:0.8,area:["540px",c],content:"../../manage/appdev/dispatch.do?mode="+e+"&id="+f,end:function(){if(e!="view"){b()}}})};deleteAppdev=function(c){layer.confirm("删除后不可撤销，是否确认删除？",{icon:0,title:["删除","font-size:14px;color:#ffffff;background:#478de4;"]},function(){$.post("../../manage/appdev/delete.do","id="+c,function(d){if("success"==d.msg){layer.msg("删除成功！",{icon:1,time:500},function(){b()})}else{layer.msg("删除失败！",{icon:2,time:500})}},"json").fail(function(e,g,f){if(e.readyState==4){var d=e.status;if(d==0||d>600){location.reload(true)}else{if(d==200){if(g=="parsererror"){layer.alert("应答数据格式解析错误！")}else{layer.alert("http response error: "+g)}}else{layer.alert("http connection error: status["+d+"], "+e.statusText)}}}})})};function a(f,c,e){var g=$("#page_size").val();var d=(e-1)*g;$.post("../../manage/appdev/ajaxFindForPage.do","uuid="+f+"&owner="+c+"&pageId="+e+"&startRow="+d+"&rows="+g,function(m){var l=$("#page_id option:last").index();var h=l+1-m.total;if(h>0){for(var k=m.total>0?m.total:1;k<l+1;k++){$("#page_id option:last").remove()}}else{if(h<0){for(var k=l+2;k<=m.total;k++){$("#page_id").append("<option value="+k+">"+k+"</option>")}}}$("#page_id").val(m.page);$("#page_info").html("页("+m.currentRows+"条数据)/共"+m.total+"页(共"+m.records+"条数据)");$("#aduuid").val(m.t.uuid);$("#adowner").val(m.t.owner);$(".table-body").html("");var o=m.dataList;var n="<table width='100%'>";for(var k=0;k<m.currentRows;k++){var j=o[k];n+='<tr><td class="appdev-uuid">'+j.uuid+'</td><td class="appdev-appid">'+j.appid+'</td><td class="appdev-system">'+j.system+'</td><td class="appdev-model">'+j.model+'</td><td class="appdev-ver">'+j.currentVer+'</td><td class="appdev-owner">'+j.owner+'</td><td class="appdev-phone">'+j.phone+'</td><td class="appdev-duty">'+j.duty+'</td><td class="appdev-org">'+j.institution+'</td><td class="appdev-action"><img src="../../resources/images/operate/view.png" alt="查看" title="查看" onclick="dispatch(\'view\','+j.id+')">&emsp;<img src="../../resources/images/operate/edit.png" alt="编辑" title="编辑" onclick="dispatch(\'edit\','+j.id+')">&emsp;<img src="../../resources/images/operate/delete.png" alt="删除" title="删除" onclick="deleteAppdev('+j.id+')"></td></tr>'}n+="</table>";n=n.replace(/>null</g,"><");$(".table-body").html(n)},"json").fail(function(i,k,j){if(i.readyState==4){var h=i.status;if(h==0||h>600){location.reload(true)}else{if(h==200){if(k=="parsererror"){layer.alert("应答数据格式解析错误！")}else{layer.alert("http response error: "+k)}}else{layer.alert("http connection error: status["+h+"], "+i.statusText)}}}})}a("","",1);$("#search_type").change(function(){$("#search_text").val("");var c=$("#search_type").val();if(c==0){$("#search_text").attr("readonly",true)}else{$("#search_text").attr("readonly",false)}});$("#search_btn").click(function(){var e=$("#search_type").val();var d="";var c="";if(e==1){d=$("#search_text").val();if(isNull(d)){layer.alert("请输入要查询的手机UUID！",{icon:6},function(f){layer.close(f);$("#search_text").select()});return}}else{if(e==2){c=$("#search_text").val();if(isNull(c)){layer.alert("请输入要查询的机主姓名！",{icon:6},function(f){layer.close(f);$("#search_text").select()});return}}}a(d,c,1)});function b(){var d=$("#page_id").val();if(isNull(d)){d=1}var e=$("#aduuid").val();if(isNull(e)){e=""}var c=$("#adowner").val();if(isNull(c)){c=""}a(e,c,d)}$("#page_id").change(function(){b()});$("#page_size").change(function(){var d=$("#aduuid").val();if(isNull(d)){d=""}var c=$("#adowner").val();if(isNull(c)){c=-2}a(d,c,1)})});