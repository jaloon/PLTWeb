var dispatch;var deleteCenter;$(function(){dispatch=function(b,a){var g="添加用户中心";var h="487px";if("edit"==b){g="修改用户中心信息";h="523px"}if("view"==b){g="查看用户中心信息";h="462px"}layer.open({type:2,title:["用户中心管理（"+g+"）","font-size:14px;color:#ffffff;background:#478de4;"],shade:0.8,area:["540px",h],content:"../../manage/center/dispatch.do?mode="+b+"&id="+a,end:function(){if(b!="view"){c()}}})};deleteCenter=function(a){layer.confirm("删除用户中心将连同该中心所属设备一起删除，且删除后不可撤销，是否确认删除？",{icon:0,title:["删除","font-size:14px;color:#ffffff;background:#478de4;"]},function(){$.post("../../manage/center/delete.do","id="+a,function(b){if("success"==b.msg){layer.msg("删除成功！",{icon:1,time:500},function(){c()})}else{layer.msg("删除失败！",{icon:2,time:500})}},"json").fail(function(b,i,j){if(b.readyState==4){var h=b.status;if(h==0||h>600){location.reload(true)}else{if(h==200){if(i=="parsererror"){layer.alert("应答数据格式解析错误！")}else{layer.alert("http response error: "+i)}}else{layer.alert("http connection error: status["+h+"], "+b.statusText)}}}})})};function d(b,g){var a=$("#page_size").val();var h=(g-1)*a;$.post("../../manage/center/ajaxFindForPage.do","name="+b+"&pageId="+g+"&startRow="+h+"&rows="+a,function(e){var q=$("#page_id option:last").index();var i=q+1-e.total;if(i>0){for(var o=e.total>0?e.total:1;o<q+1;o++){$("#page_id option:last").remove()}}else{if(i<0){for(var o=q+2;o<=e.total;o++){$("#page_id").append("<option value="+o+">"+o+"</option>")}}}$("#page_id").val(e.page);$("#page_info").html("页("+e.currentRows+"条数据)/共"+e.total+"页(共"+e.records+"条数据)");$("#cname").val(e.t.centerName);$(".table-body").html("");var p=e.dataList;var f="<table width='100%'>";for(var o=0;o<e.currentRows;o++){var r=p[o];f+='<tr><td class="center-id">'+r.id+'</td><td class="center-name">'+r.name+'</td><td class="center-ip">'+r.ip+'</td><td class="center-web">'+r.webPort+'</td><td class="center-tcp">'+r.tcpPort+'</td><td class="center-barrier">'+r.barrierPort+'</td><td class="center-ftp">'+ftpConfigConverter(r.ftpConfig)+'</td><td class="center-director">'+r.director+'</td><td class="center-phone">'+r.phone+'</td><td class="center-address">'+r.address+'</td><td class="center-remark">'+r.remark+'</td><td class="center-action"><img src="../../resources/images/operate/view.png" alt="查看" title="查看" onclick="dispatch(\'view\','+r.id+')">&emsp;<img src="../../resources/images/operate/edit.png" alt="编辑" title="编辑" onclick="dispatch(\'edit\','+r.id+')">&emsp;<img src="../../resources/images/operate/delete.png" alt="删除" title="删除" onclick="deleteAppdev('+r.id+')"></td></tr>'}f+="</table>";f=f.replace(/>null</g,"><");$(".table-body").html(f)},"json").fail(function(k,e,f){if(k.readyState==4){var l=k.status;if(l==0||l>600){location.reload(true)}else{if(l==200){if(e=="parsererror"){layer.alert("应答数据格式解析错误！")}else{layer.alert("http response error: "+e)}}else{layer.alert("http connection error: status["+l+"], "+k.statusText)}}}})}d("",1);$("#search_btn").click(function(){var a=$("#search_text").val();if(isNull(a)){layer.alert("请输入要查询的中心名称！",{icon:6},function(b){layer.close(b);$("#search_text").select()});return}d(a,1)});function c(){var b=$("#page_id").val();if(isNull(b)){b=1}var a=$("#cname").val();if(isNull(a)){a=""}d(a,b)}$("#page_id").change(function(){c()});$("#page_size").change(function(){var a=$("#cname").val();if(isNull(a)){a=""}d(a,1)})});