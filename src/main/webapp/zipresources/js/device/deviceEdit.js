$(function(){var c=parent.layer.getFrameIndex(window.name);var d="修改成功！";var a="修改失败！";var b=$("#mode").val();$("#cancel").click(function(){parent.layer.close(c)});$("#confirm").click(function(){var m=$("#id").val();var k=$("#type").val();var i;try{i=parseVerToInt($("#ver").val())}catch(j){layer.alert(j,{icon:2},function(p){layer.close(p);$("#ver").select()});return}var f=$.trim($("#model").val());var e=$("#center").val();var h=$.trim($("#produce").val());var n=$.trim($("#delivery").val());var g=$.trim($("#remark").val());var l="../../manage/device/update.do";var o="id="+m+"&type="+k+"&ver="+i+"&model="+f+"&centerId="+e+"&produce="+h+"&delivery="+n+"&remark="+g;if("add"==b){typeName=$("#type").find("option:selected").text();l="../../manage/device/add.do";o="type="+k+"&ver="+i+"&model="+f+"&centerId="+e+"&produce="+h+"&delivery="+n+"&remark="+g;d="添加成功！";a="添加失败！"}$.post(l,o,function(p){if("error"==p.msg){layer.msg(a,{icon:2,time:500})}else{layer.msg(d,{icon:1,time:500},function(){parent.layer.close(c)})}},"json").fail(function(q,s,r){if(q.readyState==4){var p=q.status;if(p==0||p>600){location.reload(true)}else{if(p==200){if(s=="parsererror"){layer.alert("应答数据格式解析错误！")}else{layer.alert("http response error: "+s)}}else{layer.alert("http connection error: status["+p+"], "+q.statusText)}}}})})});