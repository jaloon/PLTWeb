$(function(){var c=parent.layer.getFrameIndex(window.name);var d="修改成功！";var a="修改失败！";var b=$("#mode").val();$("#cancel").click(function(){parent.layer.close(c)});$("#confirm").click(function(){var j=$("#id").val();var h=$("#type").val();var f;try{f=parseVerToInt($("#ver").val())}catch(g){layer.alert(g,{icon:2},function(p){layer.close(p);$("#ver").select()});return}var n=$.trim($("#model").val());var m=$("#center").val();var e=$.trim($("#produce").val());var k=$.trim($("#delivery").val());var o=$.trim($("#remark").val());var i="../../manage/device/update.do";var l="id="+j+"&type="+h+"&ver="+f+"&model="+n+"&centerId="+m+"&produce="+e+"&delivery="+k+"&remark="+o;if("add"==b){typeName=$("#type").find("option:selected").text();i="../../manage/device/add.do";l="type="+h+"&ver="+f+"&model="+n+"&centerId="+m+"&produce="+e+"&delivery="+k+"&remark="+o;d="添加成功！";a="添加失败！"}$.post(i,l,function(p){if("error"==p.msg){layer.msg(a,{icon:2,time:500})}else{layer.msg(d,{icon:1,time:500},function(){parent.layer.close(c)})}},"json").fail(function(q,s,r){if(q.readyState==4){var p=q.status;if(p==0||p>600){location.reload(true)}else{if(p==200){if(s=="parsererror"){layer.alert("应答数据格式解析错误！")}else{layer.alert("http response error: "+s)}}else{layer.alert("http connection error: status["+p+"], "+q.statusText)}}}})})});